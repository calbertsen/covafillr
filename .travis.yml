language: r

sudo: required
cache: packages

r:
  #- oldrel
  - release
  - devel

os:
  #- linux
  - osx

env:
  #matrix:
  #- JAGS='--configure-args="--with-jags"'
  #- JAGS=""
  global:
    - OS=$(uname -s)

r_check_args: --as-cran --install-args="$JAGS"

apt_packages:
  - jags

brew_packages:
  - jags

r_packages:
  - RcppEigen
  - TMB
  - inline
  - rjags

before_install:
  - if [ ${OS} = Darwin -a TRAVIS_R_VERSION = "devel"]; then curl -Lo /tmp/R.pkg https://r.research.att.com/mavericks/R-devel/R-devel-mavericks-signed.pkg; fi
  - if [ ${OS} = Darwin -a TRAVIS_R_VERSION = "devel"]; then echo "Installing OS X binary package for R"; fi
  - if [ ${OS} = Darwin -a TRAVIS_R_VERSION = "devel"]; then sudo installer -pkg "/tmp/R.pkg" -target /; fi
  - if [ ${OS} = Darwin -a TRAVIS_R_VERSION = "devel"]; then rm /tmp/R.pkg; fi
  

after_failure:
  - if [ ${OS} = Darwin ]; then cat /Users/travis/build/calbertsen/covafillr/covafillr.Rcheck/00check.log; fi
  - if [ ${OS} = Darwin ]; then cat /Users/travis/build/calbertsen/covafillr/covafillr.Rcheck/00install.out; fi
  - if [ ${OS} != Darwin ]; then cat /home/travis/build/calbertsen/covafillr/covafillr.Rcheck/00check.log; fi
  - if [ ${OS} != Darwin ]; then cat /home/travis/build/calbertsen/covafillr/covafillr.Rcheck/00install.out; fi
  - ./travis-tool.sh dump_logs

after_success:
  - if [ ${OS} = Darwin ]; then cat /Users/travis/build/calbertsen/covafillr/covafillr.Rcheck/00check.log; fi
  - if [ ${OS} = Darwin ]; then cat /Users/travis/build/calbertsen/covafillr/covafillr.Rcheck/00install.out; fi
  - if [ ${OS} != Darwin ]; then cat /home/travis/build/calbertsen/covafillr/covafillr.Rcheck/00check.log; fi
  - if [ ${OS} != Darwin ]; then cat /home/travis/build/calbertsen/covafillr/covafillr.Rcheck/00install.out; fi
