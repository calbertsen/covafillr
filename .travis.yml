language: r

r:
  - oldrel
  - release
  - devel

os:
  - linux
  - osx

env:
  matrix:
  - JAGS=FALSE
    _R_CHECK_FORCE_SUGGESTS_=FALSE
  - JAGS=TRUE
  global:
    - OS=$(uname -s)


apt_packages:
  - if [[ ${JAGS} = TRUE ]; then echo "jags"; fi

brew_packages:
  - if [[ ${JAGS} = TRUE ]; then echo "jags"; fi

r_packages:
  - RcppEigen
  - TMB
  -   - if [[ ${JAGS} = TRUE ]; then echo "rjags"; fi
  - inline


sudo: required


after_failure:
  - if [ ${OS} = Darwin ]; then cat /Users/travis/build/calbertsen/covafillr/covafillr.Rcheck/00check.log; fi
  - if [ ${OS} = Darwin ]; then cat /Users/travis/build/calbertsen/covafillr/covafillr.Rcheck/00install.out; fi
  - if [ ${OS} != Darwin ]; then cat /home/travis/build/calbertsen/covafillr/covafillr.Rcheck/00check.log; fi
  - if [ ${OS} != Darwin ]; then cat /home/travis/build/calbertsen/covafillr/covafillr.Rcheck/00install.out; fi
  - ./travis-tool.sh dump_logs

after_success:
  - if [ ${OS} = Darwin ]; then cat /Users/travis/build/calbertsen/covafillr/covafillr.Rcheck/00check.log; fi
  - if [ ${OS} = Darwin ]; then cat /Users/travis/build/calbertsen/covafillr/covafillr.Rcheck/00install.out; fi
  - if [ ${OS} != Darwin ]; then cat /home/travis/build/calbertsen/covafillr/covafillr.Rcheck/00check.log; fi
  - if [ ${OS} != Darwin ]; then cat /home/travis/build/calbertsen/covafillr/covafillr.Rcheck/00install.out; fi
